 /* ========== BASE LAYOUT ========== */
* { box-sizing: border-box; }

body {
  font-family: system-ui, Segoe UI, Arial, sans-serif;
  margin: 0;
}


.brand {
  font-weight: 700;
  text-decoration: none;
  color: inherit;
}

#search-form { flex: 1; }

#search-input {
  width: 100%;
  padding: .5rem .75rem;
  border: 1px solid #ccc;
  border-radius: 8px;
}

.lang-switch button {
  margin-left: .25rem;
  padding: .4rem .6rem;
  border: 1px solid #ccc;
  background: #f8f8f8;
  border-radius: 8px;
  cursor: pointer;
}

.lang-switch button.active { border-color: #000; }

/* ===== Remove frame on desktop ===== */
main {
  max-width: 2500px;
  margin: 0 auto;
  padding: 2rem;
}

/* ===== Full-width mobile layout ===== */
@media (max-width: 768px) {
  main {
    margin: 0;
    padding: 0;
    width: 100%;
  }
}



a { color: #0645ad; }

.list { display: grid; gap: .5rem; }

/* ========== SEARCH DROPDOWN ========== */
.suggestions {
  position: absolute;
  background: #fff;
  border: 1px solid #ccc;
  border-radius: 8px;
  width: 100%;
  max-height: 300px;
  overflow-y: auto;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  z-index: 999;
}

.suggestion { padding: 0.5rem 0.75rem; cursor: pointer; }
.suggestion:hover { background: #f0f0f0; }
.suggestion.active { background: #e0e0ff; }

/* ========== IIIF IMAGE GALLERY ========== */
/* ========== IIIF IMAGE GALLERY ========== */
.gallery {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 10px;
  margin: 10px 0 20px;
}

@media (min-width: 768px) {
.gallery {
  background: #CB0404;
  padding: 10px;
  border-radius: 10px;
}
}

.gallery-item {
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.15);
  background: #fafafa;
  height: 300px;             /* Fixed uniform height */
  position: relative;
}

.thumb-wrapper {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;           /* Crop overflowing parts */
}

.thumb-wrapper img {
  width: 100%;
  height: 100%;
  object-fit: cover;          /* Fill + crop */
  object-position: center;    /* Keep centered focus */
  display: block;
}

.multi-icon {
  position: absolute;
  top: 6px;
  right: 6px;
  background: rgba(255, 255, 255, 0.85);
  border-radius: 4px;
  padding: 2px;
  pointer-events: none;
  box-shadow: 0 1px 3px rgba(0,0,0,0.25);
  display: flex;
  align-items: center;
  justify-content: center;
}



.gallery-item:hover img { transform: scale(1.03); }

/* Desktop-only: full-bleed band background, constrained gallery */
@media (min-width: 768px) {
  .gallery-band{
    position: relative;
    padding: 10px 0;      /* vertical band padding only */
    z-index: 0;           /* create a stacking context */
  }

  /* Full-bleed background layer (painted behind content, not behind the page) */
  .gallery-band::before{
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;

    left: 50%;
    width: 100vw;
    transform: translateX(-50%);

    background: #CB0404;
    z-index: 0;           /* IMPORTANT: not negative */
    pointer-events: none;
  }

  /* Ensure gallery content is above the background */
  .gallery-band > .gallery{
    position: relative;
    z-index: 1;
    padding: 10px;        /* keep your inner padding */
  }
}

/* Mobile: no band behaviour */
@media (max-width: 767px) {
  .gallery-band{
    padding: 0;
  }
  .gallery-band::before{
    content: none;
  }
}




/* ========== MAP THUMBNAILS ========== */
.map-thumb {
  position: relative;
  width: 100%;
  height: 200px;             /* visible height for the small map */
  margin: 10px 0;
  border-radius: 6px;
  overflow: hidden;
  box-shadow: 0 1px 4px rgba(0,0,0,0.2);
}

.map-thumb-canvas {
  width: 100%;
  height: 100%;
}


/* ========== MAP MODAL ========== */
.map-modal {
  display: none;
  position: fixed;
  z-index: 9999;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.6);
}

.map-modal-content {
  position: relative;
  margin: 5% auto;
  width: 80%;
  max-width: 800px;
  background: #fff;
  padding: 10px;
  border-radius: 10px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.4);
}

.map-large { width: 100%; height: 500px; border-radius: 6px; }

.map-close {
  position: absolute;
  top: 10px;
  right: 14px;
  background: transparent;
  border: none;
  font-size: 30px;
  cursor: pointer;
  color: #333;
}

.map-close:hover { color: #000; }


.brand-logo {
  height: 38px;
  width: auto;
  display: block;
}

#search-form {
  flex: 1;
  margin: 0 1rem;
  position: relative;
}

/* Language buttons */
.lang-switch button {
  margin-left: .4rem;
  padding: 0.4rem 0.7rem;
  border: none;
  border-radius: 6px;
  background: rgba(255,255,255,0.15);
  color: #fff;
  cursor: pointer;
  transition: background 0.3s ease;
}

.lang-switch button:hover {
  background: rgba(255,255,255,0.3);
}

.lang-switch button.active {
  background: #fff;
  color: #309898;
}

/* === Desktop layout for header === */
.site-header {
  position: sticky;
  top: 0;
  z-index: 1000;
  background-color: #309898;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.6rem 1rem;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);

  display: grid;
  grid-template-columns: auto 1fr auto; /* logo | search | lang */
  align-items: center;
  gap: 1rem;
}

/* Arrange logo, search, and language switch in one row */
.site-header-top {
  display: flex;
  align-items: center;
  flex: 1;
  gap: 1rem;
}

.brand {
  flex: 0 0 auto;
  display: flex;
  align-items: center;
}

.brand-logo {
  height: 38px;
  width: auto;
}

#search-form {
  flex: 1;
  max-width: 500px;
  position: relative;
}

.lang-switch {
  flex: 0 0 auto;
  display: flex;
  gap: 0.4rem;
}

.lang-switch button {
  border: none;
  border-radius: 6px;
  padding: 0.4rem 0.7rem;
  background: rgba(255,255,255,0.15);
  color: #fff;
  cursor: pointer;
  transition: background 0.3s ease;
}

.lang-switch button:hover {
  background: rgba(255,255,255,0.3);
}

.lang-switch button.active {
  background: #fff;
  color: #309898;
}

/* === Header: desktop default === */
.site-header {
  position: sticky;
  top: 0;
  z-index: 1000;
  background: #309898;
  color: #fff;
  padding: 0.6rem 1rem;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);

  display: grid;
  grid-template-columns: auto 1fr auto; /* logo | search | lang */
  align-items: center;
  gap: 1rem;
}

.brand {
  display: flex;
  align-items: center;
}

.brand-logo {
  height: 38px;
  width: auto;
}

/* Center search box */
#search-form {
  width: 100%;
  max-width: 600px;
  justify-self: center;
  position: relative;
}

#search-input {
  width: 100%;
  padding: 0.55rem 0.9rem;
  border: none;
  border-radius: 6px;
  font-size: 1rem;
}

/* Language switch on right */
.lang-switch {
  display: flex;
  gap: 0.4rem;
  justify-self: end;
}

.lang-switch button {
  border: none;
  border-radius: 6px;
  padding: 0.4rem 0.7rem;
  background: rgba(255,255,255,0.15);
  color: #fff;
  cursor: pointer;
  transition: background 0.3s ease;
}
.lang-switch button:hover { background: rgba(255,255,255,0.3); }
.lang-switch button.active { background:#fff; color:#309898; }

/* Suggestions dropdown */
#search-suggestions,
.suggestions {
  position: absolute;
  top: 100%;
  left: 0;
  width: 100%;
  box-sizing: border-box;
  border: 1px solid #ccc;
  border-radius: 0 0 8px 8px;
  background: #fff;
  z-index: 999;
  box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}
.suggestions .suggestion { color:#000; background:#fff; padding:.5rem .75rem; cursor:pointer; }
.suggestions .suggestion:hover { background:#f0f0f0; }

/* === Desktop override to flatten the mobile-top wrapper === */
@media (min-width: 769px) {
  /* Make .mobile-top invisible to the grid layout */
  .mobile-top {
    display: contents;
  }

  /* Ensure language switch aligns right inside the grid */
  .lang-switch {
    justify-self: end;
  }

  /* Keep search centered and full width inside its grid cell */
  #search-form {
    justify-self: center;
    width: 100%;
    max-width: 600px;
  }
}

/* === Mobile layout === */
@media (max-width: 768px) {
  .site-header {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    padding: 0.5rem 0.75rem;
    gap: 0.4rem;
  }

  /* Top row: logo left, language right (single flex row) */
  .mobile-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .brand {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    flex: 0 0 auto;
  }

  .lang-switch {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    flex: 0 0 auto;
  }

  /* Search full width below, but constrained to padding */
  #search-form {
    width: 100%;
    margin-top: 0.4rem;
    box-sizing: border-box;
  }

  #search-input {
    width: 100%;
    max-width: 100%;
    font-size: 1rem;
    box-sizing: border-box;
  }

  #search-suggestions {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
  }
}


/* Ensure the form is the positioning context and is shrink-wrapped */
.site-header #search-form {
  position: relative !important;
  width: min(100%, 600px);
  margin: 0;                 /* no stray offsets */
  justify-self: center;      /* stay centred in the middle grid cell */
}

/* Make the input define the exact box width */
.site-header #search-input {
  display: block;
  width: 100%;
  box-sizing: border-box;
}

/* Anchor the dropdown to the form and make its width EXACTLY match the input */
.site-header #search-suggestions,
.site-header .suggestions {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;                  /* <-- let left+right set width; no calc drift */
  width: auto;               /* ignore earlier width:100% */
  box-sizing: border-box;
  z-index: 999;
}

/* --- Desktop placement: force brand | search | language in one row --- */
@media (min-width: 769px) {
  .site-header {
    display: grid;
    grid-template-columns: auto 1fr auto;
    grid-template-areas: "brand search lang";
    align-items: center;
    gap: 1rem;
  }

  /* Make wrapper transparent so its children enter the grid */
  .mobile-top { display: contents; }

  /* Pin each element to its area */
  .brand { grid-area: brand; }
  #search-form { 
    grid-area: search; 
    justify-self: center;
    width: 100%;
    max-width: 600px;
  }
  .lang-switch { 
    grid-area: lang; 
    justify-self: end; 
  }

  /* Override earlier flex-oriented desktop remnants */
  #search-form { flex: initial; }              /* neutralise flex:1 */
  #search-form { max-width: 600px !important; }/* beat old 500px cap */
}

/* Desktop: limit width of entity content */
@media (min-width: 769px) {
  .entity-layout {
    max-width: 80%;       
    margin-left: auto;
    margin-right: auto;


  }
}

.entity-layout > * {
  margin-bottom: 3rem;
}



.family-tree-wrapper {
  width: 100%;
  overflow: hidden;
  position: relative;
}

.family-tree-iframe {
  width: 100%;
  height: 600px; /* ADJUST AS DESIRED */
  border: 0;
  display: block;
  overflow: hidden;
  width: 100vw !important;
  max-width: 100% !important;
}

@media (max-width: 768px) {
  .family-tree-iframe {
    height: 420px;
  }
}

/* === HERO HEADER === */

.hero-header {
  display: flex;
  align-items: center;
  gap: 24px;
  padding: 0px 0px;
}

.hero-image img {
  width: 140px;
  height: 140px;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

.hero-text h1 {
  margin: 0;
  font-size: 2rem;
  font-weight: 700;
}

.hero-desc {
  margin: 4px 0 12px;
  font-size: 1.1rem;
  color: #555;
}

.hero-tags {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.hero-tag {
  background: #EEE;
  padding: 4px 10px;
  border-radius: 8px;
  font-size: 0.9rem;
  color: #333;
}

.hero-tag.place {
  background: #d0e8ff;
  color: #045396;
}

.hero-coords {
  font-size: 0.9rem;
  color: #444;
}


/* mobile header */

@media (max-width: 600px) {
  .hero-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: 20px 16px; /* slightly reduced vertical padding */
  }

  .hero-text {
    display: flex;
    flex-direction: column;
    align-items: center; /* centers everything inside hero-text */
  }

  .hero-tags {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    margin-top: 8px;
  }

  .hero-image img {
    width: 110px;
    height: 110px;
  }
}

/* ============================================
   NEW BOX 1 + BOX 2 TWO-COLUMN LAYOUT (Option A)
   ============================================ */

/* Full-width grey background stripe */
.box-wrapper-outer {
  width: 100vw;                   /* full screen width */
  margin-left: 50%;
  transform: translateX(-50%);   /* escape parent centering */
  background: #F4631E;           /* same grey */
  padding: 2rem 0;               /* keep vertical space */
}

/* Inner constrained content (same width as rest of page) */
.box-wrapper {
  max-width: 80%;                /* desktop width */
  margin: 0 auto;                /* center it */
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
}

/* Mobile: keep full-bleed background, stack boxes */
@media (max-width: 768px) {
  .box-wrapper-outer {
    padding: 1.5rem 0;
  }

  .box-wrapper {
    max-width: 100%;             /* use full width on mobile */
    grid-template-columns: 1fr;
    padding: 0 1rem;             /* small side padding for readability */
  }
}


.box-col {
  background: #fff;
  border: 1px solid #e3e3e3;
  border-radius: 12px;
  padding: 1.25rem 1.5rem;
  box-shadow: 0 1px 4px rgba(0,0,0,0.05);
}

/* ==========================
   BOX 1 — PROFILE (DL Layout)
   ========================== */

.profile-box dl {
  margin: 0;
}

.profile-box dt {
  font-weight: 600;
  font-size: 0.95rem;
  margin-top: 1rem;
  color: #333;
}

.profile-box dd {
  margin: 0.2rem 0 0.8rem 0;
  font-size: 1rem;
  color: #444;
}

/* First row slight spacing fix */
.profile-box dt:first-child {
  margin-top: 0.2rem;
}

/* ==========================
   MAP THUMBNAIL IN BOX 1
   ========================== */

.profile-box .map-thumb {
  height: 180px;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 1px 4px rgba(0,0,0,0.15);
}

/* ==========================
   BOX 2 — COLLECTION GROUPS
   ========================== */

.collections-box {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.collection-group h3 {
  margin: 0 0 0.75rem 0;
  font-size: 1.2rem;
  font-weight: 700;
  color: #309898;
}

.collection-group dl {
  margin: 0;
}

.collection-group dt {
  font-weight: 600;
  font-size: 0.95rem;
  margin-top: 0.9rem;
  color: #333;
}

.collection-group dd {
  margin: 0.2rem 0 0.8rem 0;
  font-size: 1rem;
  color: #444;
}

/* Link layout inside collections */
.collection-group dd a {
  text-decoration: none;
  color: #0645ad;
}

.collection-group dd a:hover {
  text-decoration: underline;
}

/* Profile header matching Box 2 */
.profile-header {
  margin: 0 0 0.75rem;
  font-size: 1.2rem;
  font-weight: 700;
  color: #309898;
}

/* Layout: DL on left, map on right */
.profile-inner {
  display: grid;
  grid-template-columns: 1fr 200px;
  gap: 1.5rem;
  align-items: start;
}

/* Mobile: stack */
@media (max-width: 768px) {
  .profile-inner {
    grid-template-columns: 1fr;
  }

  .profile-map-container {
    width: 100%;
  }
}

/* Map container */
.profile-map-container .map-thumb {
  height: 200px;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 1px 4px rgba(0,0,0,0.2);
}
.profile-inner {
    display: flex;
    flex-direction: row;
    gap: 24px;
    align-items: flex-start;
}

.profile-map-container {
    min-width: 300px;
}

.profile-map-container .map-thumb {
    width: 300px;
    height: 200px;
    border-radius: 8px;
    overflow: hidden;
}
.map-thumb-canvas {
    width: 100%;
    height: 100%;   /* <-- essential for Leaflet to render */
}

/* Map at bottom of Box 1 */
.profile-map-container {
  margin-top: 1.25rem;
}

.profile-map-container .map-thumb {
  width: 100%;
  max-width: 400px;
  height: 220px;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 1px 4px rgba(0,0,0,0.2);
}

.profile-map-container .map-thumb-canvas {
  width: 100%;
  height: 100%;
}

/* ==========================================
   BOX 1: RENDER dt + dd ON THE SAME LINE
   ========================================== */

.profile-inner dl {
  display: grid;
  grid-template-columns: 180px 1fr; /* adjust width as needed */
  grid-column-gap: 1rem;
  align-items: start;
}

.profile-inner dt,
.profile-inner dd {
  margin: 0;              /* remove default browser spacing */
  padding: 4px 0;         /* keep a little vertical rhythm */
}

.profile-inner dt {
  font-weight: 600;
  color: #333;
}

.profile-inner dd {
  color: #444;
}

/* Mobile: stack with full-width label */
@media (max-width: 600px) {
  .profile-inner dl {
    grid-template-columns: 1fr; /* label above value on narrow screens */
  }
  .profile-inner dd {
    margin-bottom: 0.5rem;
  }
}

/* ==========================================
   BOX 2: RENDER dt + dd ON THE SAME LINE
   ========================================== */

.collection-group dl {
  display: grid;
  grid-template-columns: 180px 1fr;  /* adjust width if needed */
  grid-column-gap: 1rem;
  align-items: start;
}

.collection-group dt,
.collection-group dd {
  margin: 0;
  padding: 4px 0;   /* compact vertical rhythm */
}

.collection-group dt {
  font-weight: 600;
  color: #333;
}

.collection-group dd {
  color: #444;
}

/* MOBILE: stack label above value */
@media (max-width: 600px) {
  .collection-group dl {
    grid-template-columns: 1fr;
  }
  .collection-group dd {
    margin-bottom: 0.5rem;
  }
}
/* Tighten spacing for Box 2 subheadings */
.collections-box h3 {
  margin-top: 0.5rem;     /* was larger before */
  margin-bottom: 0.75rem; /* subtle but compact */
  font-size: 1.15rem;     /* slightly smaller if desired */
}

/* ==========================================
   BOX 1 — pill buttons for entity links (flat colours)
   ========================================== */

.box1-link-pill {
  display: inline-flex;
  align-items: center;
  padding: 6px 14px;
  margin: 3px 6px 3px 0;
  border-radius: 999px;
  color: #fff;
  font-weight: 600;
  text-decoration: none;
  font-size: 0.9rem;
  transition: transform 0.12s ease, opacity 0.12s ease;
  white-space: nowrap;
}

.box1-link-pill:hover {
  transform: translateY(-2px);
  opacity: 0.85;
}

.box1-link-pill:active {
  opacity: 0.75;
}

/* ==========================================
   BOX 1 — pill buttons (using user palette)
   ========================================== */

.box1-link-pill {
  display: inline-flex;
  align-items: center;
  padding: 6px 14px;
  margin: 3px 6px 3px 0;
  border-radius: 999px;
  color: #fff;
  font-weight: 600;
  text-decoration: none;
  font-size: 0.9rem;
  transition: transform 0.12s ease, opacity 0.12s ease;
  white-space: nowrap;
}

.box1-link-pill:hover {
  transform: translateY(-2px);
  opacity: 0.85;
}

.box1-link-pill:active {
  opacity: 0.75;
}

/* CATEGORY COLOURS — EXACT USER PALETTE */
.box1-pill-family {
  background: #FA0808;     /* RED */
}

.box1-pill-place {
  background: #309898;     /* DEEP TEAL */
}

.box1-pill-education {
  background: #FFB233;     /* AMBER */
}

.box1-pill-default {
  background: #5FCD96;     /* SOFT GREEN */
}

/* Arrow icon */
.box1-link-pill::after {
  content: "›";
  margin-left: 10px;
  font-weight: 700;
}

.id-icon {
  width: 18px;
  height: 18px;
  fill: #FF9F00;
  margin-right: 6px;
  vertical-align: middle;
}

/* tree toggle mobile */

.family-tree-toggle {
  display: block;
  width: 100%;
  margin: 12px 0;
  padding: 14px 16px;
  font-size: 17px;
  font-weight: 600;
  background: #eee;
  border-radius: 8px;
  border: none;
}

.family-tree-collapsible {
  transition: all 0.3s ease;
}


/* ===============================================================
   MOBILE COLLAPSIBLE RIBBONS
   =============================================================== */
@media (max-width: 768px) {

  /* hide desktop layout on mobile */
  .desktop-layout { display: none; }

  /* show mobile layout only on mobile */
  .mobile-layout { display: block; }

  .mobile-section-toggle {
    width: 100%;
    border: none;
    border-radius: 0;
    padding: 14px 16px;
    margin: 0;
    font-size: 1.05rem;
    font-weight: 700;
    text-align: left;
    color: #fff;
    position: relative;
    cursor: pointer;
  }

  /* Arrow */
  .mobile-section-toggle::after {
    content: "▾";
    position: absolute;
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 1.2rem;
    transition: transform 0.25s ease;
  }

  .mobile-section-toggle.open::after {
    transform: translateY(-50%) rotate(180deg);
  }

  /* Colour themes */
  .mobile-toggle-info         { background: #F4631E; }
  .mobile-toggle-collections  { background: #5FCD96; }
  .mobile-toggle-family       { background: #FFB233; }
  .mobile-toggle-images       { background: #FA0808; }

  /* No spacing between sections */
  .mobile-section {
    margin: 0;
    padding: 0;
  }
}

/* Desktop: hide mobile layout entirely */
@media (min-width: 769px) {
  .mobile-layout { display: none; }
}
/* MOBILE FIX: Prevent map collapse in ribbon layout */
@media (max-width: 768px) {

  /* Stop Box 1 using desktop flex layout */
  .profile-inner {
    display: block !important;
  }

  /* Map container must size naturally */
  .profile-map-container {
    min-width: auto !important;
    width: 100% !important;
  }

  /* Map thumbnail must fill available width */
  .profile-map-container .map-thumb {
    width: 100% !important;
    height: 200px !important;
  }

  .profile-map-container .map-thumb-canvas {
    width: 100% !important;
    height: 100% !important;
  }
}

/* --- Refinement 1: Desktop Map Full Width --- */
/* Override max-width constraint for desktop (min-width: 769px) */
@media (min-width: 769px) {
  /* Target the map thumb inside the left box column */
  .box-left .profile-map-container .map-thumb {
    max-width: 100%; /* Allow map to fill the entire width of Box 1 */
    height: 300px;   /* Optional: increase height for a more prominent desktop map */
  }
}
/* ===============================================================
   IMAGE GALLERY: Multi-Column/Masonry Layout (Desktop Only)
   =============================================================== */

@media (min-width: 769px) {
    /* 1. Container using Multi-Column Layout (Masonry effect) */
    .gallery.adaptive-gallery-container {
        /* CRITICAL: Sets up the columns (adjust '3' to change density) */
        column-count: 3; 
        
        /* Sets the even spacing between the columns */
        column-gap: 5px; 
        
        /* FIX: Add padding at the very top of the gallery element */
        padding-top: 20px; 
        
        /* Ensure display is block for multi-column to work */
        display: block; 
        margin: 0;
        padding-left: 0;
        padding-right: 0;
        width: 100%;
    }

    /* 2. Individual image wrapper (the link) */
    .gallery-link {
        /* CRITICAL: Prevents an image from being split across two columns */
        display: block;
        break-inside: avoid; 
        
        /* Spacing between images stacked vertically in the column */
        margin-bottom: 5px; 
        
        height: auto;
        line-height: 0; 
    }
    
    /* 3. The actual image */
    .gallery-image {
        /* Fills the full width of the column */
        width: 100%;     
        /* Maintains aspect ratio (NO CROP) */
        height: auto;    
        
        /* Remove object-fit properties, which were introducing gaps */
        object-fit: unset; 
        display: block;
    }
}

/* ===============================================================
   MOBILE: Ensure basic functionality (full width, no crop)
   =============================================================== */

@media (max-width: 768px) {
    /* Set images to stack on mobile */
    .gallery.adaptive-gallery-container {
        display: block; 
        padding: 0;
    }
    .gallery.adaptive-gallery-container .gallery-link {
        display: block;
        margin-bottom: 5px; /* Add spacing between stacked images */
        height: auto; /* Let images determine their height on mobile */
    }
    .gallery-image {
        width: 100%;
        height: auto;
        object-fit: contain;
    }
}
/* --- Multi-Image Icon Styling --- */
.gallery-link {
    position: relative; /* Ensures multi-icon is positioned relative to the link */
}
.multi-icon {
    position: absolute;
    top: 5px;
    right: 5px;
    padding: 2px;
    background: rgba(255, 255, 255, 0.85); /* Semi-transparent white background */
    border-radius: 3px;
    line-height: 1;
    color: #444; /* Dark color for the icon graphic */
    z-index: 10;
}
.home-search-wrapper {
  display: flex;
  gap: 6px;
  margin-bottom: 20px;
}

.home-card {
  padding: 16px;
  border-radius: 8px;
  background: #efefef;
  cursor: pointer;
  transition: 0.2s;
}

.home-card:hover {
  background: #ddd;
}

.recent-line {
  padding: 8px 0;
  border-bottom: 1px solid #ddd;
  cursor: pointer;
}
.recent-line:hover {
  color: #0a6;
}
/* Desktop-only: slightly deeper header + search input */
@media (min-width: 768px) {

  header.site-header {
    padding-top: 16px;   /* increase as needed */
    padding-bottom: 16px;
  }

  #search-input {
    height: 44px;        /* tweak to taste: 42–48px is usually nice */
    line-height: 44px;
    font-size: 1rem;     /* keep or nudge slightly up if you like */
  }
}
.map-block {
  margin-top: 2rem;
}

#homeMap {
  width: 100%;
  height: 500px;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 1px 4px rgba(0,0,0,0.15);
}

.map-block h2 {
  margin-bottom: 0.6rem;
}



/* Advanced Person Search section */

.aps-section {
  margin-top: 2rem;
}

.aps-inner {
  border-radius: 0;
  padding: 0;
  background: transparent;
  box-shadow: none;
}

@media (min-width: 768px) {
  .aps-inner {
    padding: 0;
  }
}

.aps-header {
  margin-bottom: 0rem;

  background: #309898;
  color: #ffffff;

    padding-top: 1rem;
  padding-bottom: 1rem;
}

#aps-results {
  position: relative;   /* button will now be positioned inside results area */
}

.aps-title {
  font-size: 1.25rem;
  font-weight: 700;
  margin: 0 0 0.3rem;
}

.aps-subtitle {
  margin: 0;
  font-size: 0.9rem;
  opacity: 0.95;
}

/* Fields grid */

.aps-form {
  margin-top: 1rem;
}

.aps-fields-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 0.75rem;
}

@media (min-width: 720px) {
  .aps-fields-grid {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

.aps-field {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.aps-label {
  font-size: 0.8rem;
  font-weight: 600;
}

.aps-dropdown {
  position: relative;
  display: flex;
  align-items: center;
}

.aps-input {
  width: 100%;
  font-size: 0.85rem;
  padding: 0.4rem 2rem 0.4rem 0.6rem;
  border-radius: 0.5rem;
  border: 1px solid rgba(0,0,0,0.12);
  outline: none;
}

.aps-input:focus {
  border-color: rgba(0,0,0,0.25);
}

.aps-clear {
  position: absolute;
  right: 0.3rem;
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: 1rem;
  opacity: 0.5;
}

.aps-clear:hover {
  opacity: 0.9;
}

/* Options dropdown */

.aps-options {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  z-index: 30;
  max-height: 220px;
  overflow-y: auto;
  background: #ffffff;
  box-shadow: 0 10px 24px rgba(0,0,0,0.12);
  margin: 0.1rem 0 0;
  padding: 0.25rem 0;
  list-style: none;
  border-radius: 0.5rem;
  border: 1px solid rgba(0,0,0,0.12);
}

.aps-options-hidden {
  display: none;
}

.aps-option {
  padding: 0.35rem 0.6rem;
  font-size: 0.85rem;
  cursor: pointer;
}

.aps-option:hover,
.aps-option.aps-option-selected {
  background: rgba(0,0,0,0.05);
}

/* Actions */

.aps-actions {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.5rem;
  margin-top: 1rem;

  padding-left: 1rem;
  padding-right: 1rem;
}


.aps-btn {
  border-radius: 999px;
  font-size: 0.85rem;
  padding: 0.4rem 0.9rem;
  border: 1px solid transparent;
  cursor: pointer;
  white-space: nowrap;
}

.aps-btn-primary {
  /* Use your primary brand colour here */
  background: #0b7e5c;
  color: #ffffff;
}

.aps-btn-primary:hover {
  filter: brightness(1.05);
}

.aps-btn-secondary {
  background: #f3f3f3;
  border-color: rgba(0,0,0,0.08);
}

.aps-btn-secondary:hover {
  background: #e9e9e9;
}

.aps-btn-ghost {
  background: transparent;
  border-color: rgba(0,0,0,0.12);
}

.aps-hint {
  margin: 0;
  font-size: 0.8rem;
  opacity: 0.8;
}

/* Results */

.aps-results {
  margin-top: 1rem;
  border-top: 1px solid rgba(0,0,0,0.08);
  padding-top: 0.75rem;
}

.aps-results-hidden {
  display: none;
}

.aps-results-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.aps-results-summary {
  margin: 0;
  font-size: 0.85rem;
}

.aps-results-list {
  display: grid;
  grid-template-columns: 1fr;
  gap: 0.6rem;
  max-height: 420px;      /* prevents the block getting huge */
  overflow-y: auto;
  padding-right: 0.25rem;
}

@media (min-width: 640px) {
  .aps-results-list {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

.aps-result-card {
  border-radius: 0.75rem;
  border: 1px solid rgba(0,0,0,0.08);
  padding: 0.6rem 0.7rem;
  background: #fafafa;
}

.aps-result-title {
  margin: 0 0 0.1rem;
  font-size: 0.9rem;
  font-weight: 600;
}

.aps-result-link {
  text-decoration: none;
  color: inherit;
}

.aps-result-meta {
  margin: 0;
  font-size: 0.78rem;
  opacity: 0.85;
}

.aps-result-tags {
  margin: 0.25rem 0 0;
  display: flex;
  flex-wrap: wrap;
  gap: 0.2rem;
}

.aps-tag {
  font-size: 0.7rem;
  padding: 0.1rem 0.35rem;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,0.15);
}

/* Pagination */

.aps-pagination {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 0.5rem;
  margin-top: 0.4rem;
}

.aps-pagination-hidden {
  display: none;
}

.aps-page-indicator {
  font-size: 0.8rem;
  opacity: 0.8;
}

.aps-view-toggle {
  position: absolute;
  top: 1.5rem;
  left: 0.75rem;
  z-index: 50;

  background: #309898;
  border: 1px solid #ddd;
  border-radius: 6px;

  padding: 4px 10px;
  display: flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  font-size: 0.9rem;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);

  transition: background 0.2s;
}

.aps-view-toggle:hover {
  background: #309898;
}

.aps-view-toggle .icon svg {
  width: 16px;
  height: 16px;
  display: block;
}

.graph-icon svg line,
.graph-icon svg circle {
  stroke: #fff;
  fill: none;
}

.list-icon svg rect {
  fill: #fff;
}
/* When in LIST mode, give room for the floating toggle button */
.aps-results.list-mode .aps-results-list {
  padding-top: 3rem;   /* adjust as needed, 2.5–3rem usually ideal */
}


/* ===========================
   APS GRAPH ZOOM (graph-only)
   =========================== */

/* Allow pinch-zoom + wheel zoom to be handled by d3.zoom cleanly */
#aps-results-graph svg {
  touch-action: none; /* critical for mobile pinch zoom */
}

/* On-screen +/- controls (only shown in graph mode by JS) */
.aps-graph-zoom-controls {
  position: absolute;
  right: 12px;
  bottom: 12px;
  z-index: 60;

  display: flex;
  flex-direction: column;
  gap: 8px;
}

.aps-graph-zoom-btn {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  border: 1px solid rgba(0,0,0,0.15);
  background: rgba(255,255,255,0.92);
  box-shadow: 0 2px 6px rgba(0,0,0,0.12);

  font-size: 20px;
  line-height: 1;
  cursor: pointer;

  display: grid;
  place-items: center;
}

.aps-graph-zoom-btn:active {
 /* Graph: only person nodes show pointer cursor */
#aps-results-graph .aps-graph-node { cursor: default; }
#aps-results-graph .aps-graph-node--person { cursor: pointer; }
 transform: translateY(1px);
}

/* =========================================================
   APS COLLAPSIBLE FILTERS + IMPACTFUL GRAPH (palette-only)
   Allowed colours: #FF9F00, #F4631E, #309898, #CB0404
   ========================================================= */



/* Filters toggle button */
/* Show / Hide filters button — match language switch style */
.aps-header .aps-filters-toggle {
  margin-left: 0.25rem;
  padding: 0.4rem 0.6rem;
  border: 1px solid #ccc;
  background: #fff;
  border-radius: 8px;

  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  color: #309898;

  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
}

.aps-header .aps-filters-toggle:hover,
.aps-header .aps-filters-toggle:focus,
.aps-header .aps-filters-toggle:active {
  background: #eeeeee;
  color: #309898;
}


/* Hover state consistent with header controls */
.aps-filters-toggle:hover {
  background: #eeeeee;
}

header.aps-header button.aps-filters-toggle {
  color: #309898;
}

/* Collapsible panel mechanics */
.aps-filters-panel {
  margin-top: 0.5rem;
  padding-left: 1rem;
  padding-right: 1rem;
}


.aps-filters-panel.aps-filters-collapsed {
  display: none;
}

/* Ensure the primary action uses palette (replaces existing green) */
.aps-btn-primary {
  background: #309898;
  color: #fff;
}

.aps-btn-primary:hover {
  background: #F4631E;
}

/* Inputs: replace grey borders with palette */
.aps-input {
  border: 2px solid #309898;
}

.aps-input:focus {
  border-color: #FF9F00;
}

/* Options dropdown: remove grey border/shadow colour cast */
.aps-options {
  border: 2px solid #309898;
  box-shadow: none;
}

/* View toggle button: palette-only */
.aps-view-toggle {
  border: 2px solid #f8f8f8;
  background: #f8f8f8;
  box-shadow: none;
}

.aps-view-toggle:hover {
  background: #f3f3f3;
}

/* Zoom controls: palette-only */
.aps-graph-zoom-btn {
  border: 2px solid #309898;
  background: #FF9F00;
  box-shadow: none;
}
.aps-graph-zoom-btn:hover {
  background: #F4631E;
}

/* List cards: remove greys and keep consistent framing */
.aps-result-card {
  border: 2px solid #309898;
  background: #fff;
}
/* Desktop: header becomes one row with right-aligned toggle */
@media (min-width: 768px) {
  .aps-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 1rem;
    padding-top: 1.25rem;
    padding-bottom: 1.25rem;
  }

  .aps-header-text {
    min-width: 0;
  }

  .aps-filters-toggle {
    margin-top: 0.25rem; /* keeps it visually aligned with title/description block */
    white-space: nowrap;
  }
}

/* Slimline filters panel spacing */
.aps-filters-panel {
  margin-top: 0.5rem;
}

/* Reduce default form top gap so collapsed/expanded feels tighter */
.aps-form {
  margin-top: 0.5rem;
}

/* Header horizontal buffer (prevents edge collision) */
.aps-header {
  padding-left: 1rem;
  padding-right: 1rem;
}
@media (min-width: 768px) {
  .aps-header {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
}
@media (min-width: 768px) {
  .aps-filters-panel,
  .aps-actions {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
}
/* Filters toggle — match .aps-btn text style, but keep lang-switch visual styling */
.aps-header .aps-filters-toggle {
  margin-left: 0.25rem;
  padding: 0.4rem 0.6rem;

  border: 1px solid #ccc;
  background: #f8f8f8;
  border-radius: 8px;
  cursor: pointer;

  /* Match Search button text style */
  font-size: 0.85rem;     /* same as .aps-btn */
  font-weight: 400;       /* match normal button text */
  line-height: 1.2;
  color: #000;

  display: inline-flex;
  align-items: center;
  gap: 0.35rem;

  /* Prevent any leftover “pill” or strong styling */
  box-shadow: none;
  text-transform: none;
}

/* Hover/active states (neutral, NOT orange) */
.aps-header .aps-filters-toggle:hover {
  background: #eeeeee;
  border-color: #ccc;
}

.aps-header .aps-filters-toggle:active {
  background: #e6e6e6;
}

/* =========================================================
   APS view toggle hard override (prevents gray/black fallback)
   Place at END of stylesheet
   ========================================================= */

#aps-view-toggle.aps-view-toggle {
  background: #309898;
  border-color: #309898;
  color: #fff;             /* label text */
}

/* Keep same colour on hover/focus/active */
#aps-view-toggle.aps-view-toggle:hover,
#aps-view-toggle.aps-view-toggle:focus,
#aps-view-toggle.aps-view-toggle:active {
  background: #309898;
  border-color: #309898;
  color: #fff;
}

/* Force icon colour regardless of SVG element types */
#aps-view-toggle.aps-view-toggle .icon svg * {
  stroke: #fff;
  fill: #fff;
}

@media (max-width: 767px) {
  .aps-header .aps-filters-toggle {
    margin-left: 0;
    margin-top: 0.5rem;
    align-self: flex-start;
  }
}
/* LIST MODE ONLY: allow results list to expand to full height (no vertical scroll) */
.aps-results.list-mode .aps-results-list {
  max-height: none;
  overflow-y: visible;
}

/* LIST MODE ONLY: add horizontal gutters so cards don't touch screen edge */
.aps-results.list-mode .aps-results-list {
  padding-left: 1rem;
  padding-right: 1rem;
}

@media (min-width: 768px) {
  .aps-results.list-mode .aps-results-list {
    padding-left: 2rem;
    padding-right: 2rem;
  }
}

/* Map Explorer shell */
.map-explorer-shell { position: relative; }

/* Filters toggle (mobile) */


/* Filters panel */
.me-filters-panel {
  position: absolute;
  top: 52px;
  left: 12px;
  width: min(320px, calc(100% - 24px));
  max-height: calc(100% - 24px);
  overflow: visible;
  z-index: 40;
  background: #fff;
  border: 2px solid #309898;
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.12);
  padding: 10px 12px;
  display: none;
}

.me-filters-panel.open { display: block; }

.me-panel-header { display: flex; align-items: center; justify-content: space-between; gap: 10px; margin-bottom: 8px; }
.me-panel-title { font-weight: 700; }
.me-group { margin: 6px 0; }
.me-group-title { font-weight: 700; margin-bottom: 4px; font-size: 0.85rem; }
.me-facet-row { display: flex; gap: 8px; align-items: center; padding: 2px 0; cursor: pointer; font-size: 0.85rem; }
.me-facet-row input { transform: translateY(1px); }
.me-panel-hint { font-size: 0.8rem; opacity: 0.8; margin-top: 6px; }

/* Mobile behaviour */
.me-filters-panel.me-mobile {
  width: min(92vw, 360px);
}

/* Pins (Leaflet div icons) */
.me-pin { background: transparent; border: none; }
.me-pin-inner {
  width: 28px; height: 28px;
  border-radius: 999px;
  display: grid;
  place-items: center;
  position: relative;
  border: 2px solid rgba(255,255,255,0.9);
  box-shadow: 0 8px 18px rgba(0,0,0,0.18);
}

.me-pin-glyph { font-size: 14px; line-height: 1; }

/* Category colours */
.me-pin-places .me-pin-inner { background: #309898; color: #fff; }
.me-pin-people .me-pin-inner { background: #FFB233; color: #111; }
.me-pin-collections .me-pin-inner { background: #5FCD96; color: #111; }
.me-pin-images .me-pin-inner { background: #FA0808; color: #fff; }
.me-pin-events .me-pin-inner { background: #333; color: #fff; }

.me-pin-badge {
  position: absolute;
  top: -8px;
  right: -8px;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  border-radius: 999px;
  background: #fff;
  color: #111;
  font-size: 11px;
  display: grid;
  place-items: center;
  border: 1px solid rgba(0,0,0,0.12);
}

/* Popup layout */
.me-popup { font-family: inherit; }
.me-popup-title { font-weight: 700; margin-bottom: 4px; }
.me-popup-desc { margin: 6px 0; }
.me-popup-meta { font-size: 0.85rem; opacity: 0.85; margin-top: 4px; }
.me-popup-thumb { margin-top: 8px; }
.me-popup-thumb img { border-radius: 10px; display: block; max-width: 100%; height: auto; }

.me-popup-link { display: inline-block; margin-top: 10px; padding-top: 2px; font-weight: 700; text-decoration: none; }

/* Images popup thumb grid */
.me-popup-thumbs {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 6px;
  margin-top: 10px;
}
.me-popup-thumbs a img {
  width: 100%;
  height: auto;
  border-radius: 10px;
  display: block;
}
/* Map loading overlay */
#homeMap {
  position: relative; /* required for overlay positioning */
}

.map-loading-overlay {
  position: absolute;
  inset: 0;
  z-index: 600; /* above leaflet tiles + markers */
  display: none; /* toggled by JS */
  align-items: center;
  justify-content: center;
  background: rgba(255,255,255,0.75);
  backdrop-filter: blur(1px);
}

.map-loading-overlay.is-visible {
  display: flex;
}

.map-loading-spinner {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: 6px solid rgba(0,0,0,0.18);
  border-top-color: #309898;
  animation: mapSpin 0.9s linear infinite;
}

@keyframes mapSpin {
  to { transform: rotate(360deg); }
}

/* -----------------------------------------------------------
   Map Explorer fixed-size popup cards
   ----------------------------------------------------------- */

/* Scope everything to these popups only */
.me-fixed-popup .leaflet-popup-content-wrapper {
  background: #fff;
  padding: 6px;                 /* white margin outside border */
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.18);
}

.me-fixed-popup .leaflet-popup-content {
  border: 2px solid #309898;    /* teal border */
  border-radius: 10px;
  padding: 8px;
  margin: 0;
  background: #fff;
  width: 200px !important;      /* fixed width */
  min-width: 200px !important;
  max-width: 200px !important;
  height: auto !important;      /* allow content-driven height */
  overflow: hidden !important;
  max-height: none !important;               /* only scroll if content exceeds max-height */
}


/* Make your internal popup layout fill the fixed container */
.me-fixed-popup .me-popup {
  display: flex;
  flex-direction: column;
  gap: 6px;
  height: auto;                 /* ensure NOT fixed */
}

/* Text: clamp so long labels/descriptions do not resize the card */
.me-fixed-popup .me-popup-title {
  font-weight: 700;
  margin: 0;
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;       /* up to 2 lines */
}

.me-fixed-popup .me-popup-desc {
  margin: 0;
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;       /* up to 3 lines */
}

.me-fixed-popup .me-popup-meta {
  margin: 0;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;     /* single-line meta */
  opacity: 0.85;
  font-size: 0.85rem;
}

/* Main thumbnail box: fixed dimensions */
.me-fixed-popup .me-popup-thumb {
  margin-top: 6px;
  width: 100%;
  aspect-ratio: 4 / 3;               /* fixed thumb height */
  border-radius: 10px;
  overflow: hidden;
}

.me-fixed-popup .me-popup-thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Images popup grid: fixed dimensions per thumb */
.me-fixed-popup .me-popup-thumbs {
  margin-top: 6px;
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 6px;
}

.me-fixed-popup .me-popup-thumbs img {
  width: 100%;
  aspect-ratio: 1 / 1;         /* square thumbs */
  object-fit: cover;
  border-radius: 8px;
  display: block;
}

/* Keep the "View details" link pinned to the bottom */
.me-fixed-popup .me-popup-link {
  margin-top: auto;
  display: inline-block;
  font-weight: 700;
  text-decoration: none;
}

/* If the thumb wrapper exists but is empty, collapse it */
.me-fixed-popup .me-popup-thumb:empty {
  display: none !important;
}

/* If the wrapper exists but has no <img>, collapse it (Chrome supports :has) */
.me-fixed-popup .me-popup-thumb:not(:has(img)) {
  display: none !important;
}
.me-fixed-popup .me-popup {
  height: auto !important;
}
/* Inset the Leaflet popup close (X) to account for the outer white frame */
.leaflet-container .leaflet-popup.me-fixed-popup a.leaflet-popup-close-button {
  top: 8px !important;
  right: 8px !important;
}

/* ---------------------------------------------------
   Map Explorer – Images ring thumbnails
   --------------------------------------------------- */

/* Leaflet wrapper reset */
.me-thumb-leaflet-icon,
.leaflet-div-icon.me-thumb-leaflet-icon {
  background: transparent !important;
  border: 0 !important;
  padding: 0 !important;
}

/* Tune these three values to taste */
:root {
  --me-thumb-size: 140px;
  --me-thumb-outer-pad: 5px;   /* white OUTSIDE the blue border */
  --me-thumb-border: 2px;      /* blue border thickness */
  --me-thumb-inner-pad: 5px;   /* white INSIDE the blue border */
}

.me-thumb-icon {
  width: var(--me-thumb-size);
  height: var(--me-thumb-size);
  border-radius: 999px;
  background: #fff;                 /* this is the OUTER white halo */
  position: relative;
  box-shadow: 0 2px 10px rgba(0,0,0,0.25);
  box-sizing: border-box;
}

/* Blue border INSET from the outer edge, so outer white is visible */
.me-thumb-icon::before {
  content: "";
  position: absolute;
  inset: var(--me-thumb-outer-pad);
  border: var(--me-thumb-border) solid #309898;
  border-radius: 999px;
  pointer-events: none;
  box-sizing: border-box;
}

/* Inner clipped image circle: inset further to create inner white padding */
.me-thumb-inner {
  position: absolute;
  inset: calc(var(--me-thumb-outer-pad) + var(--me-thumb-border) + var(--me-thumb-inner-pad));
  border-radius: 999px;
  overflow: hidden;
  background: #fff;
}

.me-thumb-inner img {
  width: 100%;
  height: 100%;
  display: block;
  object-fit: cover;
  object-position: center;
}

.me-thumb-icon--clickable { cursor: pointer; }

/* Map loading overlay: never capture clicks unless explicitly visible */
.map-loading-overlay { pointer-events: none; }
.map-loading-overlay.is-visible { pointer-events: auto; }

/* Enlarge and perfectly centre the locate icon */
.me-locate-control .me-locate-btn {
  width: 34px;
  height: 34px;
  line-height: 34px;
  text-align: center;

  /* icon sizing */
  font-size: 22px;
  font-weight: 600;

  /* ensure vertical centring across browsers */
  display: flex;
  align-items: center;
  justify-content: center;
}
.me-thumb-error {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: #f5f5f5;
  border: 1px solid rgba(0,0,0,0.18);
  border-radius: 6px;
  padding: 6px;
  text-align: center;
  box-sizing: border-box;
}

.me-thumb-error-icon {
  font-weight: 700;
  font-size: 16px;
  line-height: 1;
  margin-bottom: 4px;
}

.me-thumb-error-text {
  font-size: 12px;
  line-height: 1.2;
}
/* ---------------------------------------------------
   Map Explorer – Mixed-category (pie) markers (FINAL)
   --------------------------------------------------- */

/* Wrapper */
.me-pin-mixed { background: transparent; border: none; }

/* Hide glyph (badge remains) */
.me-pin-mixed .me-pin-glyph { display: none; }

/* Apply pie fill */
.me-pin-mixed .me-pin-inner,
.me-pin-mixed .me-pin-inner-mixed {
  background: var(--me-mix-bg, #777);
  background-image: var(--me-mix-bg, #777);
}

/* Keep Leaflet UI elements constrained to the map container */
#homeMap,
.leaflet-container {
  position: relative;   /* ensure a positioning context */
  overflow: hidden;     /* clip controls/attribution to the map bounds */
}

/* Force Leaflet control anchors to stay within the container (not the viewport) */
.leaflet-container .leaflet-top,
.leaflet-container .leaflet-bottom {
  position: absolute !important;  /* override any accidental fixed positioning */
}
/* Keep ALL map UI stacking confined to the map */
.map-explorer-shell,
#homeMap {
  position: relative;
  z-index: 0;
  isolation: isolate; /* creates a new stacking context */
}

.me-controls-bar{
  position: absolute;
  top: 12px;
  left: 12px;

  /* IMPORTANT: do NOT span across the map */
  right: auto;

  z-index: 1100;
  display: inline-flex;
  justify-content: flex-start;
  align-items: center;
  gap: 8px;

  /* IMPORTANT: bar should not block Leaflet controls */
  pointer-events: none;
}

/* Buttons remain clickable */
.me-controls-bar > button,
.me-controls-bar > a{
  pointer-events: auto;
}




/* Match site button styling (white text on blue) */
.me-controls-bar .me-filters-toggle,
.me-controls-bar .me-clear-btn{
  margin-left: 0.25rem;
  padding: 0.4rem 0.6rem;
  border: 1px solid #ccc;
  background: #309898;
  border-radius: 8px;

  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  color: #fff;

  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
}
/* ---------------------------------------------------
   Mobile-only compact filters panel (Map Explorer)
   --------------------------------------------------- */
@media (max-width: 640px) {

  /* Reduce panel width (~20%) and keep inside map */
  .me-filters-panel {
    width: min(250px, calc(100% - 24px)); /* ~20% narrower than desktop */
    padding: 6px 8px;
  }

  /* Tighten group spacing */
  .me-group {
    margin: 4px 0;
  }

  .me-group-title {
    font-size: 0.8rem;
    margin-bottom: 3px;
  }

  /* Compact each filter row */
  .me-facet-row {
    font-size: 0.8rem;
    padding: 1px 0;
    gap: 6px;
  }

  /* Reduce hint size */
  .me-panel-hint {
    font-size: 0.75rem;
    margin-top: 4px;
  }

  /* Slightly smaller controls bar buttons */
  .me-controls-bar .me-filters-toggle,
  .me-controls-bar .me-clear-btn {
    padding: 0.3rem 0.5rem;
    font-size: 0.8rem;
  }
}
/* ---------------------------------------------------
   Map Explorer — remove rounded corners completely
   --------------------------------------------------- */

/* The section wrapping the map */
.map-block {
  border-radius: 0 !important;
  overflow: visible;
}

/* The map container itself */
#homeMap {
  border-radius: 0 !important;
  overflow: hidden; /* keeps tiles clean at edges */
}

/* Leaflet internal container */
#homeMap .leaflet-container {
  border-radius: 0 !important;
}
/* Homepage: remove the gap between Map Explorer and Advanced Person Search */
.map-block {
  margin-bottom: 0; /* ensure map section doesn't add space below */
}

.map-block + .aps-section {
  margin-top: 0 !important; /* remove the gap completely */
}
/* APS: remove gap between header and results container */
#advanced-person-search .aps-header {
  margin-bottom: 0 !important;
}

#advanced-person-search .aps-results {
  margin-top: 0 !important;
  padding-top: 0 !important;
  border-top: 0 !important;
}

/* =========================================================
   APS: remove ALL vertical gap between header and results content
   (collapsed filters + graph/list)
   Put at VERY END of styles.css
   ========================================================= */

#advanced-person-search .aps-header {
  margin-bottom: 0 !important;
}

#advanced-person-search #aps-results.aps-results {
  margin-top: 0 !important;
  padding-top: 0 !important;
  border-top: 0 !important;
}

/* The small remaining “white strip” is often this header spacing */
#advanced-person-search .aps-results-header {
  margin: 0 !important;
  padding: 0 !important;
}

/* Ensure the graph container starts immediately */
#advanced-person-search #aps-results-graph.aps-results-graph {
  margin-top: 0 !important;
  padding-top: 0 !important;
}

#advanced-person-search
#aps-filters-panel:not(.aps-filters-collapsed) {
  padding-bottom: 0.75rem; /* adjust to taste: 0.6–0.9rem */
}
/* Map Explorer header – red variant of APS header */
.map-header-red {
  background: #CB0404;
}

/* =========================================================
   Born on This Day – consolidated rules (desktop + mobile)
   Clean replacement (redundancy removed; desktop fixed width,
   mobile unchanged; easy future resizing via CSS variables)
   ========================================================= */

/* -------------------------
   Desktop sizing “knobs”
   ------------------------- */
:root{
  --botd-card-w: 350px;     /* desktop card width */
  --botd-card-h: 500px;     /* desktop card depth */
  --botd-gap: 16px;         /* gap between cards when 2-up */
  --botd-pad-x: 10px;       /* body padding left/right */
  --botd-pad-top: 10px;     /* body padding top */
  --botd-pad-bottom: 2rem;  /* body bottom padding */
  --botd-image-h: 190px;    /* deterministic desktop image height */
}

/* -------------------------
   Mosaic container
   ------------------------- */
.botd-block{
  margin: 0 !important;
  padding: 0 !important;
}

.botd-slot{
  display: grid;
  grid-template-columns: 1fr; /* mobile/default */
  gap: 0 !important;          /* mosaic: no whitespace */
}

/* -------------------------
   Card shell
   ------------------------- */
.botd-card{
  display: block;
  text-decoration: none;
  color: inherit;

  background: #F4631E;
  border: 2px solid #F4631E;
  border-radius: 0;
  overflow: hidden;

  /* Desktop default; mobile overrides below */
  height: 360px;
}

.botd-card-head{
  background: #F4631E;
  color: #fff;
  font-weight: 700;
  padding: 0.75rem 1rem;
  line-height: 1.2;
  font-size: 1.25rem;
  border-bottom: 2px solid #F4631E;
}

.botd-card-body{
  padding: 10px 10px 2rem;
  display: grid;
  grid-template-rows: auto auto;
  gap: 10px;
}

/* -------------------------
   Info box
   ------------------------- */
.botd-info{
  background: #fff;
  color: #111;
  border-radius: 6px;
  padding: 8px 9px;
}

.botd-title-line{
  font-weight: 800;
  font-size: 0.95rem;
  line-height: 1.25;
  margin-bottom: 6px;
}

.botd-sep{ opacity: 0.6; }

.botd-desc{
  font-size: 0.88rem;
  opacity: 0.9;
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;
}

/* -------------------------
   Image (base)
   ------------------------- */
.botd-image{
  background: #fff;
  overflow: hidden;
}

.botd-image img{
  width: 100%;
  height: 100%;
  display: block;
  object-fit: cover;
  object-position: center;
}

/* =========================================================
   DESKTOP (>=768px)
   - Fixed-width track (no stretch)
   - Image expands to fill depth
   - Info stays natural height
   - Gap between image and info preserved (no overlap)
   ========================================================= */
@media (min-width: 768px){

  /* Desktop alignment gutter (orange) */
  .botd-block{
    padding-left: 2rem;
    background: #F4631E;
  }

  /* 1-up fixed-width mosaic */
  .botd-slot{
    gap: var(--botd-gap) !important;
    grid-template-columns: var(--botd-card-w);
    justify-content: start;
    width: max-content;
    max-width: 100%;
  }

  /* Card = header + body fills remainder */
  .botd-card{
    display: grid;
    grid-template-rows: auto 1fr;
    width: var(--botd-card-w);
    height: var(--botd-card-h);
    padding-left: 1rem;
    box-sizing: border-box;
  }

  /* Body fills remaining height; flex stack prevents overlap */
  .botd-card-body{
    height: 100%;
    padding: var(--botd-pad-top) var(--botd-pad-x) var(--botd-pad-bottom);

    display: flex;
    flex-direction: column;
    gap: 10px;        /* this is the padding between image and info */
    min-height: 0;    /* critical so the image can shrink/grow safely */
  }

  /* Image grows to consume leftover depth */
  .botd-image{
    flex: 1 1 auto;                 /* take remaining height */
    min-height: var(--botd-image-h);/* keeps it from becoming too short */
    background: #fff;
    overflow: hidden;

    /* safety: ensure it participates in normal flow */
    position: static;
  }

  .botd-image img{
    width: 100%;
    height: 100%;
    display: block;
    object-fit: cover;
    object-position: center;
  }

  /* Info remains natural height (never overlaps) */
  .botd-info{
    flex: 0 0 auto;
    position: static;
  }
}

 

/* Home hero layout: BOTD + Carousel */
.botd-slot{
  display: grid;
  grid-template-columns: 1fr;  /* stack by default */
  gap: 0 !important;           /* keep your mosaic tight */
}

/* Desktop: BOTD fixed, carousel fills remaining width */
@media (min-width: 900px){
  .botd-slot{
    gap: var(--botd-gap) !important;
    grid-template-columns: var(--botd-card-w) minmax(0, 1fr);
    justify-content: start;

    width: auto;       /* override shrink-wrap */
    max-width: 100%;
  }
}



/* =========================================================
   MOBILE (<=767px) — keep as your source of truth
   ========================================================= */
@media (max-width: 767px){
  .botd-card{
    height: auto !important;
    min-height: 360px;
    box-sizing: border-box;
  }

  .botd-card-body{
    padding: 12px 1rem 2rem;
    gap: 12px;
  }

  .botd-info{
    padding-left: 1rem;
    padding-right: 1rem;
    border-radius: 8px;
  }

  .botd-image{
    aspect-ratio: 1 / 1; /* square on mobile */
    height: auto;
  }

  .botd-image img{
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    display: block;
  }
}

/* Home: BOTD must sit flush with Map Explorer
   Use adjacent sibling if .map-block immediately follows .botd-block */
.botd-block + .map-block{
  margin-top: 0 !important;
}
/* =========================================================
   Home Image Carousel Card
   ========================================================= */

.hic-card{
  background: #FF9F00;
  border: 2px solid #FF9F00;
  overflow: hidden;
  display: grid;
  grid-template-rows: auto 1fr; /* header + content */
  height: var(--botd-card-h);   /* match BOTD on desktop */
  text-decoration: none;
  color: inherit;
}

.hic-head{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  color: #fff;
  font-weight: 700;
  line-height: 1.2;
  font-size: 1.25rem;
}

/* =========================================================
   Carousel – Randomize button (match global button style)
   ========================================================= */
.hic-randomize{
  margin-left: 0.25rem;
  padding: 0.4rem 0.6rem;

  border: 1px solid #ccc;
  background: #fff;
  border-radius: 8px;

  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  color: #FF9F00;

  display: inline-flex;
  align-items: center;
  gap: 0.35rem;

  /* reset earlier carousel-specific styling */
  appearance: none;
  box-shadow: none;
}

/* Hover / focus states to match other controls */
.hic-randomize:hover{
  background: #f7f7f7;
}

.hic-randomize:focus-visible{
  outline: none;
  box-shadow: 0 0 0 2px rgba(48,152,152,0.25);
}


.hic-body{
  position: relative;
  padding: 10px 10px 2rem; /* keep “2rem bottom padding” analogue */
  min-height: 0;          /* allow internal scrollers/fit */
}

/* Nav arrows */
.hic-arrow{
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 3;
  width: 40px;
  height: 40px;
  border: 2px solid rgba(255,255,255,0.85);
  background: rgba(0,0,0,0.25);
  color: #fff;
  cursor: pointer;
  display: grid;
  place-items: center;
}

.hic-arrow:hover{ background: rgba(0,0,0,0.35); }

.hic-arrow.prev{ left: 10px; }
.hic-arrow.next{ right: 10px; }

/* Carousel viewport/track */
.hic-viewport{
  height: 100%;
  overflow: hidden;
  border-radius: 8px;
  background: rgba(255,255,255,0.15);
}

.hic-track{
  height: 100%;
  display: flex;
  transition: transform 300ms ease;
  will-change: transform;
}




.hic-slide a{
  display: grid;
  grid-template-rows: 1fr auto;
  height: 100%;
  text-decoration: none;
  color: inherit;
}

.hic-img{
  background: #fff;
  overflow: hidden;
}

.hic-img img{
  width: 100%;
  height: 100%;
  display: block;
  object-fit: cover;
  object-position: center;
}

.hic-caption{
  background: rgba(0,0,0,0.55);
  color: #fff;
  padding: 0.5rem 0.6rem;
  font-weight: 700;
  font-size: 0.9rem;
  line-height: 1.2;

  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

/* Mobile: carousel card stacks under BOTD and uses natural height */
/* =========================================================
   MOBILE ONLY (<=767px)
   - Fixed card height (450px)
   - Crop images to fit
   ========================================================= */
@media (max-width: 767px){
  .hic-card{
    height: 450px;          /* fixed */
    min-height: 450px;      /* enforce */
  }

  /* Keep head + body predictable within 360px */
  .hic-body{
    min-height: 0;
    height: 100%;
  }

  /* Ensure the viewport and slide fill available height */
  .hic-viewport{
    height: 100%;
  }

  .hic-track{
    height: 100%;
  }

  .hic-slide{
    height: 100%;
  }

  .hic-img{
    height: 100%;
    overflow: hidden;
  }

  .hic-img img{
    width: 100%;
    height: 100%;
    object-fit: cover;      /* crop */
    object-position: center;
    display: block;
  }
}
/* =========================================================
   MOBILE ONLY (<=767px)
   - Title first with 2rem left padding
   - Randomize button on right with 2rem right padding
   ========================================================= */
@media (max-width: 767px){
  .hic-head{
    padding-left: 1rem;
    padding-right: 1rem;
  }

  /* Ensure title comes first visually */
  .hic-title{
    order: 0;
  }

  /* Move Randomize to the far right */
  .hic-randomize{
    order: 1;
    margin-left: auto;
  }
}


 /* MOBILE ONLY (<=767px): one image at a time + arrow sizing */
@media (max-width: 767px){
  :root{
    --hic-slide-w: 100%;
  }

  .hic-arrow{
    width: 36px;
    height: 36px;
  }
}

/* Tablet: still likely 1-up, but allow slightly wider slides */
@media (min-width: 768px) and (max-width: 899px){
  :root{
    --hic-slide-w: 300px;
  }
}
/* =========================================================
   DESKTOP ONLY (>=900px)
   ========================================================= */
@media (min-width: 900px){
  /* Title first, Randomize floated right */
  .hic-head{
    padding-left: 1rem;
    padding-right: 1rem;
  }

  .hic-title{
    order: 0;
  }

  .hic-randomize{
    order: 1;
    margin-left: auto;
  }

  /* Optional: remove the hard-coded spacer div effect if present */
  #home-image-carousel .hic-head > div[style*="width"]{
    display: none;
  }
}
@media (min-width: 900px){
  .hic-card{
    padding-left: 1rem;
    padding-right: 1rem;
    box-sizing: border-box;
    background: #FF9F00; /* reaffirm to ensure padding matches */
  }
}

@media (min-width: 900px){
  /* Show full image (no crop) within the fixed carousel height */
  .hic-img{
    overflow: hidden;          /* keep tidy inside slide */
    background: #fff;          /* letterbox background */
  }

  .hic-img img{
    width: 100%;
    height: 100%;
    object-fit: contain;       /* key change: no cropping */
    object-position: center;
  }
}
@media (min-width: 900px){
  .botd-slot{
    width: auto;          /* important: stop shrink-wrap */
    max-width: 100%;
    grid-template-columns: var(--botd-card-w) minmax(0, 1fr);
  }
}

@media (min-width: 900px){
  /* Critical: allow grid children to shrink inside minmax(0,1fr) */
  #botd-card-slot,
  .botd-slot > *{
    min-width: 0;
  }

  /* Belt-and-braces: prevent any horizontal bleed */
  .botd-block{
    overflow-x: hidden;
  }
}
@media (min-width: 900px){
  #home-image-carousel{
    min-width: 0;          /* critical in CSS Grid */
    max-width: 100%;
    box-sizing: border-box;
  }
}
@media (min-width: 900px){
  /* Desktop carousel uses native horizontal scroll instead of fixed-width translate */
  #home-image-carousel .hic-viewport{
    overflow-x: auto;                 /* allow horizontal scroll */
    overflow-y: hidden;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
  }

  #home-image-carousel .hic-track{
    display: flex;
    height: 100%;
    transition: none;                 /* disable transform animation on desktop */
    will-change: auto;
  }

  /* Variable-width slides (natural width) */
  #home-image-carousel .hic-slide{
    flex: 0 0 auto;                   /* NOT fixed width */
    height: 100%;
    border-right: 10px solid transparent; /* keep your spacing */
    scroll-snap-align: start;
    box-sizing: border-box;
  }

  /* Make image define slide width by its natural aspect ratio at fixed height */
  #home-image-carousel .hic-img{
    height: 100%;
    background: #fff;
    overflow: hidden;
  }

  #home-image-carousel .hic-img img{
    height: 100%;
    width: auto;                      /* key: natural width */
    object-fit: contain;              /* no cropping */
    display: block;
  }

  /* Caption stays full slide width */
  #home-image-carousel .hic-caption{
    width: 100%;
  }
}
/* =========================================================
   DESKTOP ONLY (>=900px)
   Hide native horizontal scrollbar (keep scroll functionality)
   ========================================================= */
@media (min-width: 900px){
  .hic-viewport{
    scrollbar-width: none;        /* Firefox */
    -ms-overflow-style: none;     /* IE 10+ / old Edge */
  }

  .hic-viewport::-webkit-scrollbar{
    display: none;                /* Chrome, Safari, Edge */
  }
}
/* =========================================================
   MOBILE ONLY (<=767px)
   Force 1 image per view (override desktop variable-width logic)
   ========================================================= */
@media (max-width: 767px){

  /* Keep viewport clipped to a single slide width */
  .hic-viewport{
    overflow-x: hidden;   /* no need for manual scrolling on mobile */
    overflow-y: hidden;
  }

  /* Track can remain flex; do not allow wrap */
  .hic-track{
    flex-wrap: nowrap;
    height: 100%;
  }

  /* Each slide must occupy the full viewport width */
  .hic-slide{
    flex: 0 0 100% !important;
    width: 100% !important;
    height: 100%;
    border-right: 0;      /* optional: remove inter-slide gap on mobile */
  }

  /* Image fills slide; crop (mobile behaviour) */
  .hic-img{
    height: 100%;
    overflow: hidden;
  }

  .hic-img img{
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    display: block;
  }
}
@media (max-width: 767px){
  .hic-viewport{
    overflow: hidden; /* arrows control movement; avoids partial manual scroll */
  }

  .hic-track{
    display: flex;
    flex-wrap: nowrap;
    height: 100%;
  }

  /* One slide = exactly one viewport width */
  .hic-slide{
    flex: 0 0 100% !important;
    width: 100% !important;
    height: 100%;
    border-right: 0 !important;
    box-sizing: border-box;
  }

  /* Mobile uses cropped fill */
  .hic-img{
    height: 100%;
    overflow: hidden;
    background: #fff;
  }

  .hic-img img{
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    object-position: center;
    display: block;
  }
}
/* =========================================================
   Site Footer (layout refinements)
   ========================================================= */
.site-footer{
  background: #2b2b2b;
  color: #fff;
  margin-top: 0;
}

/* Desktop-first padding: 2rem top/left/right as requested */
.site-footer-inner{
  max-width: 1100px;
  margin: 0 auto;

  padding-top: 2rem;
  padding-left: 2rem;
  padding-right: 2rem;
  padding-bottom: 1.25rem;

  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* Main text: pinned top-left by virtue of padding on the container */
.site-footer-text{
  margin: 0;
  line-height: 1.5;
  font-size: 0.95rem;
  opacity: 0.95;
  max-width: 75ch; /* keeps it readable on wide screens */
}

/* Bottom row: link left, credit right (same baseline) */
.site-footer-bottom{
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 1rem;
}

/* Link sits under the main text, aligned left (inherits container padding) */
.site-footer-link{
  color: #fff;
  text-decoration: underline;
  text-underline-offset: 3px;
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  font-weight: 600;
  margin: 0; /* ensure clean baseline */
}

.site-footer-link:hover{
  opacity: 0.9;
}

/* Credit on same line, floated right via flex */
.site-footer-credit{
  margin: 0;
  font-size: 0.9rem;
  font-weight: 600;
  opacity: 0.95;
  text-align: right;
  white-space: nowrap; /* prevents awkward wrap on desktop */
}

/* -------------------------
   Mobile optimisation
   ------------------------- */
@media (max-width: 767px){
  .site-footer-inner{
    padding-top: 1.25rem;
    padding-left: 1rem;
    padding-right: 1rem;
    padding-bottom: 1.25rem;
  }

  .site-footer-text{
    max-width: none;
    font-size: 0.95rem;
  }

  /* Stack link and credit cleanly on mobile */
  .site-footer-bottom{
    flex-direction: column;
    align-items: flex-start;
    gap: 0.75rem;
  }

  .site-footer-credit{
    white-space: normal;
    text-align: left;
  }
}

/* Footer: remove centered max-width on desktop (full-bleed content with 2rem padding) */
@media (min-width: 768px){
  .site-footer-inner{
    max-width: none;
    width: 100%;
    margin: 0;           /* remove auto-centering */
  }
}
/* Home (mobile): eliminate any trailing whitespace below footer */
@media (max-width: 767px){
  #homeContainer .home-wrapper{
    padding-bottom: 0 !important;
    margin-bottom: 0 !important;
  }

  #homeContainer #advanced-person-search.aps-section{
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  #homeContainer .aps-pagination{
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
}

/* NON-HOME pages only: space below header */
main:not(#homeContainer){
  padding-top: 2rem !important;
  padding-left: 0 !important;
  padding-right: 0 !important;
  padding-bottom: 0 !important;
}

/* HOME page: keep flush */
main#homeContainer{
  padding-top: 0 !important;
  padding-left: 0 !important;
  padding-right: 0 !important;
  padding-bottom: 0 !important;
}


/* =========================================================
   Home hero header with looping video background
   ========================================================= */
.home-hero{
  position: relative;
  background: #2e140a;              /* white behind video */
  overflow: hidden;
}

/* Video layer */
.home-hero-video{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  opacity: 0.3;                  /* 50% transparency */
  pointer-events: none;          /* avoid clicks */
}

/* Content layer */
.home-hero-content{
  position: relative;
  z-index: 1;
  padding: 1.25rem 2rem 5rem;  /* extra depth: increase bottom padding */
}

/* Optional: tighten headings if needed */
.home-hero-content h1{
  margin-top: 0;
}
.home-hero-content p{
  margin-bottom: 0;
}
@media (max-width: 767px){
  .home-hero-content{
    padding-left: 1rem;
    padding-right: 1rem;
    padding-bottom: 3rem;
  }
}
.home-hero-content h1{
  margin-top: 0;
}
/* =========================================================
   Home hero text styling
   ========================================================= */
.home-hero-content{
  color: #fff;              /* default text colour */
}

.home-hero-content h1{
  color: #fff;
  font-weight: 800;         /* slightly bolder than default */
  letter-spacing: 0.2px;   /* subtle emphasis (optional) */
}

.home-hero-content p{
  color: rgba(255,255,255,0.95); /* soften body line slightly */
}
